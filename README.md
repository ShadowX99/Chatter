# API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [number](#number)
    -   [Parameters](#parameters)
-   [string](#string)
    -   [Parameters](#parameters-1)
-   [connect](#connect)
-   [err](#err)
-   [log](#log)
-   [on](#on)
    -   [Parameters](#parameters-2)
-   [on](#on-1)
    -   [Parameters](#parameters-3)
-   [on](#on-2)
    -   [Parameters](#parameters-4)
-   [chat](#chat)
    -   [Parameters](#parameters-5)
-   [join](#join)
    -   [Parameters](#parameters-6)
-   [username](#username)
-   [insert](#insert)
    -   [Parameters](#parameters-7)
-   [insert](#insert-1)
    -   [Parameters](#parameters-8)
-   [distinct](#distinct)
    -   [Parameters](#parameters-9)
-   [emit](#emit)
    -   [Parameters](#parameters-10)
-   [emit](#emit-1)
    -   [Parameters](#parameters-11)
-   [emit](#emit-2)
    -   [Parameters](#parameters-12)
-   [toArray](#toarray)
    -   [Parameters](#parameters-13)
-   [username](#username-1)
    -   [Parameters](#parameters-14)
-   [message](#message)

## number

Require MongoDB native node client to keep chat history.

### Parameters

-   `null` **[string](#string)** 'mongodb'

## string

Require Socket.io to use  web sockets for the chat clients.

### Parameters

-   `null` **[string](#string)** 'socket.io'
    -   `null.listen` **[number](#number)** (4001)

## connect

Connect to MongoDB from localhost to database- chatter.

## err

If error in database connection - show error

-   Throws **DatabaseError** 

## log

If successfully connected, log connection.

## on

Connect to Socket Client.

### Parameters

-   `null` **[string](#string)** 'connection'
-   `function` **[string](#string)** (socket)

## on

Socket when recieving "add-user" call.

### Parameters

-   `null` **[string](#string)** "add-user"
-   `function` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](#string)>** (data)

## on

Listen for send-message call from sockets.

### Parameters

-   `null` **[string](#string)** "send-message"
-   `null` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](#string)>** (incoming data)

## chat

Create or Use Collections

### Parameters

-   `null` **[string](#string)** 'chats'
-   `null` **[string](#string)** 'users'

## join

Socket joins to rooms.

### Parameters

-   `null` **room** "**public**"

## username

## insert

Insert into collections -users

### Parameters

-   `null-username` **[string](#string)** 
-   `null-joined_at` **timestamp** timestamp

## insert

Insert all chat activities to collection -chats

### Parameters

-   `username` **[string](#string)** username
-   `message` **[string](#string)** content
-   `towhom` **[string](#string)** recipient
-   `sent_at` **timestamp** timestamp

## distinct

Fetch unique usernames from users collection

### Parameters

-   `null` **[string](#string)** "username"

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;srting>** userlist

## emit

Send the user list to clients.

### Parameters

-   `null` **@var** 'users'
-   `userlist` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](#string)>** 

## emit

Send chat history to connected sockets.

### Parameters

-   `null` **[string](#string)** 'history'
-   `null` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](#string)>** 'result'

## emit

Emit chat activity to client.

### Parameters

-   `null` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](#string)>** 'output'

## toArray

Fetch chat history of both public and private from DB.

Descending Sort,Limit to 10, change to array format for emit

### Parameters

-   `username` **[string](#string)** 
-   `towhom` **[string](#string)** 
-   `towhom` **[string](#string)** 

## username

Send the incoming message to appropriate room

### Parameters

-   `if`  private  - to intended user
-   `if`  public   -  to all users

Returns **[emit](#emit)** new message with data

## message
